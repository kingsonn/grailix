Grailix â€” Supabase Database Schema (Authoritative Reference)

This is the official schema. Windsurf must use these column names exactly. All queries must use these fields.

ğŸ”¶ 1. users
column	type	notes
id	uuid (pk)	generated by Supabase
wallet_address	text (unique)	required
credits_balance	integer	free credits
real_credits_balance	integer	crypto-backed credits
xp	integer	default 0
streak	integer	default 0
accuracy	numeric(5,2)	default 0
created_at	timestamptz	default now()
updated_at	timestamptz	auto-updated
ğŸ”¶ 2. predictions
column	type	notes
id	serial (pk)	
prediction_text	text	required
source_name	text	optional
source_category	text	optional
asset	text	ex: "AAPL", "BTC"
expiry_timestamp	timestamptz	required
created_timestamp	timestamptz	default now()
sentiment_yes	integer	default 0
sentiment_no	integer	default 0
prediction_hash	text	on-chain hash
outcome_hash	text	hash of resolution
status	text	"pending" or "resolved"
outcome_value	text	"YES" / "NO" / "EXACT_NUMBER"
resolved_price	numeric	actual price
resolved_timestamp	timestamptz	set when resolved
ğŸ”¶ 3. user_prediction_stakes
column	type	notes
id	serial (pk)	
user_id	uuid (fk â†’ users.id)	
prediction_id	integer (fk â†’ predictions.id)	
position	text	"YES" or "NO"
stake_credits	integer	amount user staked
payout_credits	integer	credited after resolution
created_at	timestamptz	default now()
resolved_at	timestamptz	when stake resolved
ğŸ”¶ 4. prediction_pools
column	type	notes
id	serial (pk)	
prediction_id	integer (fk â†’ predictions.id)	
total_yes	integer	total YES stake in pool
total_no	integer	total NO stake in pool
last_updated	timestamptz	default now()
ğŸ”¶ 5. transactions
column	type	notes
id	serial (pk)	
user_id	uuid (fk â†’ users.id)	
type	text	"deposit" or "withdraw"
amount	numeric	positive number
tx_hash	text	blockchain transaction
status	text	"pending" / "confirmed" / "failed"
created_at	timestamptz	default now()
ğŸ”¶ 6. leaderboard_weekly
column	type	notes
id	serial (pk)	
user_id	uuid	not foreign key because it's a snapshot
xp	integer	
streak	integer	
accuracy	numeric	
week_start	date	
ğŸ”¶ 7. ai_raw_inputs
column	type	notes
id	serial (pk)	
raw_text	text	original scraped text
source_url	text	URL or source
source_name	text	Bloomberg, X.com etc
fetched_at	timestamptz	default now()
ğŸ”¶ 8. ai_normalized_predictions
column	type	notes
id	serial (pk)	
raw_id	integer (fk â†’ ai_raw_inputs.id)	
normalized_prediction_text	text	paraphrased, clean
asset	text	ex: BTCUSDT
direction	text	"up" / "down" / etc
target_value	numeric	
expiry_timestamp	timestamptz	
source_name	text	
reason_validated	text	short explanation
is_valid	boolean	default true
created_at	timestamptz	default now()
â­ INSTRUCTIONS TO WINDSURF

Use this schema for ALL database operations.
If a field is missing in an API or UI, refer to this document.
Never invent new column names or change types.

â­ WHY THIS IS CRITICAL

This prevents:

mis-typed column names

wrong DB writes

broken endpoints

inconsistent naming between files

UI crashes due to undefined fields

stake/pool math errors